<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

  <title>Merge PDFs</title>
  <style>
    

    
  </style>
</head>
<body>
<!-- Navbar -->
  <nav class="navbar">
    <div class="navbar-left">
      <a href="" class="logo">ORGANIZE PDFs</a>
    </div>

    <div class="navbar-center">
      <img src="{{ url_for('static', filename='pdf_image.png') }}" alt="PDF Icon" class="nav-icon">
      <span class="nav-text">ORGANIZE</span>
    </div>
  <button onclick="history.back()">Go Back</button>
</nav>

  <h1 class="Orgaznize_PDFs">ORGANIZE PDFs</h1>
<!--
  <div class="upload-box" onclick="document.getElementById('fileInput').click()">
    Click here to select PDF files
    <input type="file" id="fileInput" accept="application/pdf" multiple style="display: none" />
  </div>

  <div class="file-preview" id="preview"></div>

  <div class="buttons">
    <input type="text" id="filenameInput" placeholder="Merged file name (e.g., myfile.pdf)" />
    <br />
    <button class="remove-all-btn" onclick="removeAll()">Remove All</button>
    <button class="merge-btn" onclick="uploadFiles()">Merge PDFs</button>
  </div>

  <script>
    const preview = document.getElementById("preview");
    const fileInput = document.getElementById("fileInput");
    let filesToUpload = [];

    fileInput.addEventListener("change", (e) => {
      const files = Array.from(e.target.files);
      files.forEach(file => {
        if (!filesToUpload.some(f => f.name === file.name)) {
          filesToUpload.push({ file, name: file.name });
        }
      });
      updatePreview();
    });

    function updatePreview() {
      preview.innerHTML = "";
      filesToUpload.forEach((item, index) => {
        const div = document.createElement("div");
        div.className = "file-item";
        div.innerHTML = `
          <span>${item.name}</span>
          <button onclick="removeFile(${index})">Remove</button>
        `;
        preview.appendChild(div);
      });
    }

    function removeFile(index) {
      filesToUpload.splice(index, 1);
      updatePreview();
    }

    function removeAll() {
      filesToUpload = [];
      updatePreview();
    }

    function uploadFiles() {
      if (filesToUpload.length === 0) {
        alert("Please select PDF files to merge.");
        return;
      }

      const filename = document.getElementById("filenameInput").value.trim() || "merged.pdf";
      const formData = new FormData();
      filesToUpload.forEach(item => formData.append("pdfs", item.file));
      formData.append("filename", filename);

      fetch("/merge", {
        method: "POST",
        body: formData
      })
      .then(res => {
        if (!res.ok) throw new Error("Merge failed");
        return res.blob();
      })
      .then(blob => {
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = filename.endsWith(".pdf") ? filename : filename + ".pdf";
        a.click();
        URL.revokeObjectURL(url);
        removeAll();
      })
      .catch(() => alert("An error occurred while merging PDFs."));
    }
  </script>-->
</body>
</html>
